webpackJsonp([1],{"8vaK":function(e,t){},FGJD:function(e,t){},ITQ7:function(e,t){},NHnr:function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var s=i("7+uW"),n={render:function(){var e=this.$createElement,t=this._self._c||e;return t("div",{attrs:{id:"app"}},[t("router-view")],1)},staticRenderFns:[]};var o=i("VU/8")({name:"App"},n,!1,function(e){i("ooXd")},null,null).exports,a=i("/ocq"),r=i("mtWM"),l=i.n(r),c=i("zL8q"),d=i.n(c),m=i("bOdI"),u=i.n(m),f=i("Y50r"),h={name:"login",components:{Avatar:i.n(f).a},data:function(){var e;return e={form:{name:"",password:"",region:"",date1:"",date2:"",delivery:!1,type:[],resource:"",desc:""},rules:{name:[{required:!0,message:"请输入账号",trigger:"blur"},{min:3,max:12,message:"账号长度为3-12.",trigger:"blur"}],password:[{required:!0,message:"请输入密码",trigger:"blur"},{min:6,max:20,message:"密码的长度是6-20之间.",trigger:"blur"}],emailAddress:[{required:!0,message:"请输入邮箱",trigger:"blur"},{min:3,max:20,message:"密码的长度是3-20之间.",trigger:"blur"}]},loginButtonText:"登 录",isHaveAccount:"没有账号",isNeedRegister:"注册",isShowPassword:!0,isShowLoginName:!0,isShowEmail:!1,loading:!1},u()(e,"isShowPassword",!0),u()(e,"isVerificationCode",!1),u()(e,"signIn","Sign In"),u()(e,"username",""),u()(e,"drawer",!1),u()(e,"direction","rtl"),u()(e,"currentDate",new Date),u()(e,"dialogWidth","20%"),u()(e,"msg","Welcome to Quan"),u()(e,"activeIndex2","1"),u()(e,"dialogFormVisible",!1),e},methods:{handleSelect:function(e,t){},handleClose:function(e){e()},GoToLogin:function(){},registered:function(){"注册"==this.isNeedRegister?(this.isShowLoginName=!1,this.isShowPassword=!1,this.loginButtonText="注 册",this.isShowEmail=!0,this.isHaveAccount="已有账号",this.isVerificationCode=!0,this.isNeedRegister="登录"):(this.isShowLoginName=!0,this.isShowPassword=!0,this.loginButtonText="登 录",this.isShowEmail=!1,this.isHaveAccount="没有账号",this.isVerificationCode=!1,this.isNeedRegister="注册")},getBack:function(){},isShowPasswordFun:function(){this.isShowPassword=!0},showLoginPage:function(){this.form={},this.dialogFormVisible=!0,this.isVerificationCode=!1},closeDialog:function(){this.$emit("sendLoginPageInfor",{isLogin:!1})},sendEmailCode:function(){var e=this;l.a.get("/login/sendEmailVerificationCode?emailAddress="+this.form.emailAddress).then(function(e){void 0!==e&&c.Message.success("验证码已发送到您的邮箱..")}).catch(function(t){c.Message.error(t.msg),e.isShowPassword=!1,e.isShowEmail=!1,e.isVerificationCode=!0})},login:function(){var e=this,t=this.loginButtonText;"注 册"==t?l.a.post("/login/add",{emailAddress:null==this.form.emailAddress?"":this.form.emailAddress,verificationCode:null==this.form.verificationCode?"":this.form.verificationCode}).then(function(t){void 0!==t&&(c.Message.success(t),e.loginButtonText="绑 定",e.isShowLoginName=!0,e.isShowPassword=!0,e.isShowEmail=!1,e.isVerificationCode=!1)}):"登 录"==t?(this.loading=!0,l.a.post("/login/login",{loginName:null==this.form.name?"":this.form.name,password:null==this.form.password?"":this.form.password,verificationCode:null==this.form.verificationCode?"":this.form.verificationCode}).then(function(t){void 0!==t?(c.Message.success("Welcome.."),e.$store.state.isShowLogin=!1,e.$emit("sendLoginPageInfor",{isLogin:!0,name:e.form.name,id:t.id}),e.dialogFormVisible=!1,e.username=e.form.name,e.signIn="",e.form.name="",e.form.password="",e.loading=!1):e.loading=!1}).catch(function(t){c.Message.error(t.msg),e.loading=!1})):"绑 定"==t&&l.a.post("/login/setName",{loginName:null==this.form.name?"":this.form.name,password:null==this.form.password?"":this.form.password}).then(function(t){void 0!==t&&(c.Message.success("绑定成功.."),e.$store.state.isShowLogin=!1,e.$emit("sendLoginPageInfor",{isLogin:!0,name:e.form.name,id:t.id}),e.loginButtonText="登 录",e.isShowLoginName=!0,e.isShowPassword=!0,e.isShowEmail=!1,e.isVerificationCode=!1)})}}},g={render:function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("transition",{attrs:{name:"fade","enter-active-class":"animated tada","leave-active-class":"animated bounceOut"}},[e.$store.state.isShowLogin?i("el-dialog",{attrs:{title:"Sign In","close-on-click-modal":!1,visible:e.$store.state.isShowLogin,width:e.dialogWidth},on:{"update:visible":function(t){return e.$set(e.$store.state,"isShowLogin",t)},close:e.closeDialog}},[i("el-form",{ref:"form",attrs:{model:e.form,rules:e.rules}},[i("transition",{attrs:{name:"fade","enter-active-class":"animated zoomInLeft","leave-active-class":"animated zoomOutRight"}},[i("el-form-item",{directives:[{name:"show",rawName:"v-show",value:e.isShowLoginName,expression:"isShowLoginName"}],attrs:{prop:"name"}},[i("el-input",{attrs:{"prefix-icon":"el-icon-message",placeholder:"账 号","auto-complete":"off"},model:{value:e.form.name,callback:function(t){e.$set(e.form,"name",t)},expression:"form.name"}})],1)],1),e._v(" "),i("transition",{attrs:{name:"fade","enter-active-class":"animated zoomInLeft","leave-active-class":"animated zoomOutRight"}},[i("el-form-item",{directives:[{name:"show",rawName:"v-show",value:e.isShowPassword,expression:"isShowPassword"}],attrs:{prop:"password"}},[i("el-input",{attrs:{placeholder:"密 码",type:"password","prefix-icon":"el-icon-iconfont-icon-lock","auto-complete":"off","show-password":!0},model:{value:e.form.password,callback:function(t){e.$set(e.form,"password",t)},expression:"form.password"}})],1)],1),e._v(" "),i("transition",{attrs:{name:"fade","enter-active-class":"animated zoomInLeft","leave-active-class":"animated zoomOutRight"}},[i("el-form-item",{directives:[{name:"show",rawName:"v-show",value:e.isShowEmail,expression:"isShowEmail"}],attrs:{prop:"emailAddress"}},[i("el-input",{attrs:{"prefix-icon":"el-icon-message",placeholder:"邮 箱","auto-complete":"off"},model:{value:e.form.emailAddress,callback:function(t){e.$set(e.form,"emailAddress",t)},expression:"form.emailAddress"}})],1)],1),e._v(" "),i("transition",{attrs:{name:"fade","enter-active-class":"animated zoomInLeft","leave-active-class":"animated zoomOutRight"}},[i("el-form-item",{directives:[{name:"show",rawName:"v-show",value:e.isVerificationCode,expression:"isVerificationCode"}],attrs:{prop:"verificationCode"}},[i("el-input",{attrs:{placeholder:"邮箱验证码","prefix-icon":"el-icon-warning"},model:{value:e.form.verificationCode,callback:function(t){e.$set(e.form,"verificationCode",t)},expression:"form.verificationCode"}},[i("i",{staticClass:"el-input__icon el-icon-iconfont-icon-send-line",staticStyle:{cursor:"pointer"},attrs:{slot:"suffix"},on:{click:e.sendEmailCode},slot:"suffix"})])],1)],1),e._v(" "),i("el-form-item",[i("el-button",{staticStyle:{width:"100%"},attrs:{type:"primary",loading:e.loading},on:{click:e.login}},[e._v(e._s(e.loginButtonText))])],1)],1),e._v(" "),i("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[i("span",{staticStyle:{float:"left","font-family":"'Microsoft YaHei'","font-size":"12px"}},[e._v("忘记密码?"),i("a",{on:{click:function(t){return e.getBack()}}},[e._v("找回")])]),e._v(" "),i("span",{staticStyle:{"font-family":"'Microsoft YaHei'","font-size":"12px"}},[e._v(e._s(e.isHaveAccount)+"?"),i("a",{on:{click:e.registered}},[e._v(e._s(e.isNeedRegister))])])])],1):e._e()],1)},staticRenderFns:[]};var v={name:"index",components:{login:i("VU/8")(h,g,!1,function(e){i("O0s4")},"data-v-1f4e234f",null).exports},data:function(){return{basepath:"ws://localhost:8080/websocket/",path:"",socket:"",signIn:"Sign In",username:"",drawer:!1,direction:"rtl",messageContent:"",currentDate:new Date,dialogWidth:"20%",msg:"Welcome to Quan",activeIndex2:"1",friendName:"谢新权",activeNames:["1"],worldList:[{name:"Huan"},{name:"Ting"}],worldListCurrPage:1,friendInfor:{},chatRecord:[{name:"新",content:"Muggle.",isMine:!0},{name:"权",content:"Muggle.",isMine:!1}]}},methods:{handleSelect:function(e,t){},handleClose:function(e){e()},showLoginPage:function(){this.isEmpty(this.username)&&(this.$store.state.isShowLogin=!0)},receiveLoginPageInfor:function(e){this.isEmpty(e)||e.isLogin&&(this.signIn="",this.username=e.name,this.path=this.basepath+e.id,this.init(),this.loadWorldList())},isEmpty:function(e){if(void 0===e||null==e||""==e)return!0},perfectInfor:function(){},exit:function(){var e=this;l.a.post("/login/logout").then(function(t){e.signIn="Sign In",e.username="",c.Message.success(t)})},sendMessage:function(){var e=this;this.isEmpty(this.friendInfor.id)?c.Message.warning("请先选择一位朋友.."):l.a.post("/message/send",{toUserId:this.friendInfor.id,content:this.messageContent}).then(function(t){e.isEmpty(t)||(e.chatRecord.push({content:e.messageContent}),e.messageContent="")})},loadWorldList:function(e){var t=this;e=this.isEmpty(e)?1:e,l.a.post("/user/allUser",{pageIndex:e,pageCount:10}).then(function(e){if(!t.isEmpty(e)){for(var i=e,s=[],n=0;n<i.length;n++)s[n]={name:i[n].name,id:i[n].id};t.worldList=s}})},init:function(){"undefined"==typeof WebSocket?c.Message.error("您的浏览器不支持socket"):(this.socket=new WebSocket(this.path),this.socket.onopen=this.open,this.socket.onerror=this.error,this.socket.onmessage=this.getMessage,this.socket.onclose=this.onclose)},open:function(){console.log("socket连接成功")},error:function(){console.log("连接错误")},getMessage:function(e){c.Message.success("收到消息:"+e.data)},send:function(){this.socket.send(params)},close:function(){this.socket.close(),console.log("socket已经关闭")},handleChange:function(e){},addFriend:function(){},weChat:function(e,t){this.friendName=t,this.friendInfor={id:e,name:t}},reduceWorldListPage:function(){this.worldListCurrPage<=1||(this.worldListCurrPage--,this.loadWorldList(this.worldListCurrPage))},addWorldListPage:function(){this.worldListCurrPage>=20||(this.worldListCurrPage++,this.loadWorldList(this.worldListCurrPage))}},mounted:function(){this.loadWorldList()},destroyed:function(){this.isEmpty(this.socket)||(this.socket.onclose=this.close)}},p={render:function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",{staticClass:"hello",attrs:{id:"app"}},[i("login",{on:{sendLoginPageInfor:e.receiveLoginPageInfor}}),e._v(" "),i("el-menu",{staticClass:"el-menu-demo",attrs:{"default-active":e.activeIndex2,mode:"horizontal","background-color":"#fff","text-color":"#000","active-text-color":"red"},on:{select:e.handleSelect}},[i("el-menu-item",{attrs:{index:"1"}},[e._v("主页")]),e._v(" "),i("el-submenu",{attrs:{index:"2"}},[i("template",{slot:"title"},[e._v("我的工作台")]),e._v(" "),i("el-menu-item",{attrs:{index:"2-1"}},[e._v("选项1")]),e._v(" "),i("el-menu-item",{attrs:{index:"2-2"}},[e._v("选项2")]),e._v(" "),i("el-menu-item",{attrs:{index:"2-3"}},[e._v("选项3")]),e._v(" "),i("el-submenu",{attrs:{index:"2-4"}},[i("template",{slot:"title"},[e._v("选项4")]),e._v(" "),i("el-menu-item",{attrs:{index:"2-4-1"}},[e._v("选项1")]),e._v(" "),i("el-menu-item",{attrs:{index:"2-4-2"}},[e._v("选项2")]),e._v(" "),i("el-menu-item",{attrs:{index:"2-4-3"}},[e._v("选项3")])],2)],2),e._v(" "),i("el-menu-item",{attrs:{index:"3",disabled:""}},[e._v("消息中心")]),e._v(" "),i("el-menu-item",{attrs:{index:"4"}},[i("el-avatar",[e._v(" user ")])],1),e._v(" "),i("el-menu-item",{staticStyle:{float:"right"},attrs:{index:"5"},on:{click:e.showLoginPage}},[i("span",[e._v(e._s(e.signIn))]),e._v(" "),i("el-dropdown",{directives:[{name:"show",rawName:"v-show",value:""!=e.username,expression:"username != ''"}]},[i("span",{staticClass:"el-dropdown-link"},[i("el-avatar",[e._v(e._s(e.username))])],1),e._v(" "),i("el-dropdown-menu",{attrs:{slot:"dropdown"},slot:"dropdown"},[i("transition",{attrs:{name:"fade","enter-active-class":"animated lightSpeedIn","leave-active-class":"animated lightSpeedOut"}},[i("div",[i("el-avatar",{staticStyle:{float:"left"}},[e._v(e._s(e.username))]),e._v("  "),i("span",{staticStyle:{height:"40px","line-height":"40px","text-align":"center"}},[e._v(e._s(e.username))]),e._v(" "),i("el-card",[i("div",[i("span",[e._v("Recent Login In Time : ")]),e._v(" "),i("div",{staticClass:"bottom clearfix"},[i("time",{staticClass:"time"},[e._v("2019-12-22")])]),e._v(" "),i("el-row",{attrs:{gutter:20}},[i("el-col",{attrs:{span:16}},[i("a",{on:{click:e.perfectInfor}},[e._v("完善信息")])]),e._v(" "),i("el-col",{attrs:{span:8}},[i("a",{on:{click:e.exit}},[e._v("退出")])])],1)],1)])],1)])],1)],1)],1)],1),e._v(" "),i("el-container",[i("el-aside",{staticStyle:{height:"600px"},attrs:{width:"10%"}},[i("el-collapse",{staticStyle:{width:"100%"},attrs:{accordion:""}},e._l(e.worldList,function(t,s){return i("el-collapse-item",{key:s},[i("template",{slot:"title"},[e._v("\n            "+e._s(t.name)+" "),i("i",{staticClass:"header-icon el-icon-info"})]),e._v(" "),i("div",[i("el-row",[i("el-col",{attrs:{span:12}},[i("el-button",{attrs:{type:"primary",icon:"el-icon-iconfont-mini-icon-emotion",size:"mini"},on:{click:e.addFriend}},[e._v("添加")])],1),e._v(" "),i("el-col",{attrs:{span:12}},[i("el-button",{attrs:{type:"primary",icon:"el-icon-iconfont-mini-icon-qq",size:"mini"},on:{click:function(i){return e.weChat(t.id,t.name)}}},[e._v("聊天")])],1)],1)],1)],2)}),1),e._v(" "),i("el-input",{staticClass:"inputNeedCenter",staticStyle:{position:"relative",bottom:"0px"},attrs:{readonly:""},model:{value:e.worldListCurrPage,callback:function(t){e.worldListCurrPage=t},expression:"worldListCurrPage"}},[i("i",{staticClass:"el-input__icon el-icon-remove",staticStyle:{cursor:"pointer"},attrs:{slot:"prefix"},on:{click:e.reduceWorldListPage},slot:"prefix"}),e._v(" "),i("i",{staticClass:"el-input__icon el-icon-circle-plus",staticStyle:{cursor:"pointer"},attrs:{slot:"suffix"},on:{click:e.addWorldListPage},slot:"suffix"})])],1),e._v(" "),i("el-container",[i("el-header",{staticStyle:{height:"40px"}},[e._v(e._s(e.friendName))]),e._v(" "),i("el-main",e._l(e.chatRecord,function(t,s){return i("div",{key:s},[i("div",{directives:[{name:"show",rawName:"v-show",value:!t.isMine,expression:"!item.isMine"}],staticStyle:{"text-align":"left","margin-top":"5px"}},[i("el-avatar",{attrs:{size:32}},[e._v(e._s(t.name))]),e._v("\n            "+e._s(t.content))],1),e._v(" "),i("div",{directives:[{name:"show",rawName:"v-show",value:t.isMine,expression:"item.isMine"}],staticStyle:{"text-align":"right","margin-top":"5px"}},[e._v("\n            "+e._s(t.content)),i("el-avatar",{attrs:{size:32}},[e._v(e._s(t.name))])],1)])}),0),e._v(" "),i("el-footer",{staticStyle:{height:"40px"}},[i("el-input",{attrs:{placeholder:"请输入内容"},nativeOn:{keyup:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:e.sendMessage(t)}},model:{value:e.messageContent,callback:function(t){e.messageContent=t},expression:"messageContent"}},[i("i",{staticClass:"el-input__icon el-icon-iconfont-icon-send-line",staticStyle:{cursor:"pointer"},attrs:{slot:"suffix"},on:{click:e.sendMessage},slot:"suffix"})])],1)],1)],1),e._v(" "),i("div"),e._v(" "),i("div")],1)},staticRenderFns:[]};var w=i("VU/8")(v,p,!1,function(e){i("8vaK")},"data-v-716b92c8",null).exports,_={render:function(){var e=this.$createElement;return(this._self._c||e)("div",{staticClass:"hello"},[this._v("\n    "+this._s(this.msg)+"\n")])},staticRenderFns:[]};var x=i("VU/8")({name:"loginOld",data:function(){return{msg:"Welcome to login"}}},_,!1,function(e){i("ITQ7")},"data-v-5d5ecdec",null).exports;s.default.use(a.a);var S=new a.a({mode:"history",routes:[{path:"/",name:"index",component:w},{path:"/",name:"login",component:x}]}),C=(i("tvR6"),i("mvHQ")),L=i.n(C),y=i("//Fk"),k=i.n(y),b=i("Dd8w"),I=i.n(b),M=i("mw3O"),P=i.n(M),N=i("NYxO");s.default.use(N.a);var E={mutationsSetIsShowLogin:function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];return e.isShowLogin=t}},R=new N.a.Store({state:{count:0,isShowLogin:!1},mutations:E});l.a.defaults.baseURL="http://localhost:8080/",l.a.defaults.withCredentials=!0,l.a.interceptors.request.use(function(e){return"post"===e.method?e.data=P.a.stringify(I()({},e.data)):e.params=I()({},e.params),e.headers["Content-Type"]="application/x-www-form-urlencoded",e},function(e){k.a.reject(e)}),l.a.interceptors.response.use(function(e){return 1==e.data.status?e.data.data:5==e.data.status?(c.Message.warning(e.data.msg+", 即将打开登录页面.."),void setTimeout(function(){R.state.isShowLogin=!0},1e3)):void c.Message.error(e.data.msg)},function(e){c.Message.error("error"),c.Message.error(e),c.Message.error(L()(e));JSON.parse(L()(e)).response.status;return k.a.reject(e)});l.a,i("FGJD"),i("OMRB");var W=i("M89t");i("crYZ");s.default.component("happy-scroll",W.HappyScroll),s.default.use(d.a),s.default.config.productionTip=!1,new s.default({el:"#app",router:S,store:R,components:{App:o},template:"<App/>"});t.default=o},O0s4:function(e,t){},OMRB:function(e,t){},crYZ:function(e,t){},ooXd:function(e,t){},tvR6:function(e,t){}},["NHnr"]);
//# sourceMappingURL=app.693488433ae1be11f4ab.js.map